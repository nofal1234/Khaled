<section class="product-listing ">
  <div class="px-4 md:px-8 mx-2.5 md:mx-20 pt-6 md:pt-8 pb-10">
    <!-- Breadcrumb -->
    <section class=" py-0 md:py-1">
      <div class="md:block">
        <div class="px-0 md:px-0 py-0 mb-3 md:mb-4">
          <nav class="flex items-center gap-2 text-sm md:text-base text-black-600">
            <a href="/" class="hover:text-mainColor transition">{{ t('home') }}</a>
            <span>/</span>
            <span class="text-mainColor font-semibold">{{ context.collection.title }}</span>
          </nav>
        </div>
      </div>
    </section>

    <!-- Title -->
    <div class="px-2 md:px-0 mb-6 md:mb-8 mt-2 md:mt-3 flex items-center {% if context.products | length > 0 %}justify-between{% else %}justify-start{% endif %} gap-3">
      <h1 class="text-2xl md:text-3xl font-bold mb-1 md:mb-2">{{ context.collection.title }}</h1>
      {% if context.products | length > 0 %}
      <div class="w-auto ml-3 md:ml-6">
        <div class="relative w-[140px] h-[36px] md:w-[176px] md:h-[42px]">
          <select class="w-full h-full appearance-none border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-mainColor text-right text-xs md:text-base pr-3 pl-9 md:pr-4 md:pl-10">
            <option>{{ t('sort') }}</option>
            <option>{{ t('price') }}: {{ t('from') }} {{ t('lowest') }} {{ t('to') }} {{ t('highest') }}</option>
            <option>{{ t('price') }}: {{ t('from') }} {{ t('highest') }} {{ t('to') }} {{ t('lowest') }}</option>
            <option>{{ t('highest_rated') }}</option>
          </select>
          <span class="absolute left-3 top-1/2 -translate-y-1/2 pointer-events-none text-gray-700">
            <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M6 9l6 6 6-6" />
            </svg>
          </span>
        </div>
      </div>
      {% endif %}
    </div>

    <!-- Products Grid -->
    {% if context.products | length > 0 %}
    {% set cols_mobile = widget.data.cards_per_row_mobile%}
    {% set cols_tablet = widget.data.cards_per_row_tablet%}
    {% set cols_desktop = widget.data.cards_per_row_desktop %}
    <div class="grid 
      grid-cols-{{ cols_mobile }} 
      sm:grid-cols-{{ cols_mobile }} 
      md:grid-cols-{{ cols_tablet }} 
      lg:grid-cols-{{ cols_desktop }} 
      gap-4 md:gap-6">
      {% for product in context.products %}
      {% ui "product-card.njk", product=product ,
      card_title_color=widget.data.card_title_color,
      card_title_size=widget.data.card_title_size,
      card_description_color=widget.data.card_description_color,
      card_description_size=widget.data.card_description_size,
      price_before_color=widget.data.price_before_color,
      price_before_size=widget.data.price_before_size,
      price_color=widget.data.price_color,
      price_size=widget.data.price_size,
      discount_color=widget.data.discount_color,
      discount_size=widget.data.discount_size,
      buy_button_bg=widget.data.buy_button_bg %}
      {% endfor %}
    </div>
    
    <!-- Pagination -->
    <div class="mt-8">
      {% ui "pagination.njk" %}
    </div>
    {% else %}
    {%ui "empty-products.njk"%}
    {% endif %}
  </div>
</section>