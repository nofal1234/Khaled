<!-- Service Features Section -->
<section id="{{widget.id}}" class="my-12 flex flex-col gap-4 md:my-16 px-2 mx-2.5 md:mx-20 service-features-section">
    <div>
        <h1 
            class="md:text-[40px] text-lg md:leading-[120%] leading-[150%] font-bold text-center"
            style="
                color: {{ widget.data.title_color }};
            "
        >
            {{ t(widget.data.title) }}
        </h1>
        {% if widget.blocks | length > 0 %}

        <!-- Desktop / Tablet Grid -->
        <div class="hidden md:grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-10 md:gap-10">
            {% for block in widget.blocks %}
            <div
                class="text-center flex flex-col gap-2 md:gap-[26px] items-center md:px-[26px] md:py-[46px] py-[23px] rounded-2xl transition-all duration-300 hover:-translate-y-2">
                <img src="{{ block.data.icon.fileUrl  }}"
                    class="md:w-16 md:h-16 w-[30px] h-[30px] mx-auto object-contain" />
                <h3
                    class="service-feature__title font-medium text-dark text-center"
                    style="
                        --feature-item-title-size: {{ widget.data.title_size | default(18) }}px;
                        {% if  widget.data.title_color %}color: {{  widget.data.title_color }};{% endif %}
                    "
                >
                    {{ t(block.data.title) }}
                </h3>
                <p
                    class="service-feature__desc md:leading-[150%] leading-[100%] text-center max-w-xs mx-auto"
                    style="
                        --feature-item-desc-size: {{ widget.data.description_size | default(14) }}px;
                        {% if widget.data.description_color %}color: {{ widget.data.description_color }};{% endif %}
                    "
                >
                    {{ t(block.data.description) }}
                </p>
            </div>
            {% endfor %}
        </div>

        <!-- Mobile Swiper -->
        <div class="md:hidden">
            <div class="swiper service-features-swiper-{{widget.id}} w-full overflow-hidden">
                <div class="swiper-wrapper">
                    {% for block in widget.blocks %}
                    <div class="swiper-slide flex justify-center">
                        <div
                            class="text-center flex flex-col gap-2 md:gap-[26px] items-center md:px-[26px] md:py-[46px] py-[23px] rounded-2xl transition-all duration-300 hover:-translate-y-2">
                            <img src="{{ block.data.icon.fileUrl  }}"
                                class="md:w-16 md:h-16 w-[30px] h-[30px] mx-auto object-contain" />
                            <h3 
                                class="service-feature__title font-medium text-dark text-center"
                                style="
                                    --feature-item-title-size: {{  widget.data.title_size }}px;
                                    {% if  widget.data.title_color %}color: {{  widget.data.title_color }};{% endif %}
                                "
                            >
                                {{ t(block.data.title) }}
                            </h3>
                            <p
                                class="service-feature__desc md:leading-[150%] leading-[100%] text-center max-w-xs mx-auto"
                                style="
                                    --feature-item-desc-size: {{ widget.data.description_size | default(14) }}px;
                                    {% if widget.data.description_color %}color: {{ widget.data.description_color }};{% endif %}
                                "
                            >
                                {{ t(block.data.description) }}
                            </p>
                        </div>
                    </div>
                    {% endfor %}
                </div>
            </div>
        </div>

        {% else  %}
        {% ui "empty.njk" %}
              
            {% endif %}
    </div>
</section>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        const autoplay = '{{ widget.data.autoplay }}' == 'true';
        const autoplayDelay = Number('{{ widget.data.autoplay_delay }}');
        const speed = Number('{{ widget.data.speed }}');
        const grabCursor = '{{ widget.data.grab_cursor }}' == 'true';
        const allowTouchMove = '{{ widget.data.allow_touch_move }}' == 'true';
        const disableOnInteraction = '{{ widget.data.disable_on_interaction }}' == 'true';
        const pauseOnMouseEnter = '{{ widget.data.pause_on_mouse_enter }}' == 'true';
        const reverseDirection = '{{ widget.data.reverse_direction }}' == 'true';

        const serviceFeaturesSwiperEl = document.querySelector('.service-features-swiper-{{widget.id}}');
        if (serviceFeaturesSwiperEl) {
            new Swiper(serviceFeaturesSwiperEl, {
                loop: true,
                grabCursor: grabCursor,
                slidesPerView: 1,
                speed: speed,
                spaceBetween: 16,
                allowTouchMove: allowTouchMove,
                autoplay: autoplay
                    ? {
                        delay: autoplayDelay,
                        disableOnInteraction: disableOnInteraction,
                        pauseOnMouseEnter: pauseOnMouseEnter,
                        reverseDirection: reverseDirection
                    }
                    : false,
            });
        }
    });
</script>

{% style %}
.service-title {
  font-size: clamp(calc(var(--service-title-size) * 0.7), calc(var(--service-title-size) * 0.5 + 1vw), var(--service-title-size));
  line-height: 1.2;
}

.service-feature__title {
  font-size: clamp(calc(var(--feature-item-title-size) * 0.75), calc(var(--feature-item-title-size) * 0.55 + 1vw), var(--feature-item-title-size));
  line-height: 1.3;
}

.service-feature__desc {
  font-size: clamp(calc(var(--feature-item-desc-size) * 0.75), calc(var(--feature-item-desc-size) * 0.55 + 0.9vw), var(--feature-item-desc-size));
  line-height: 1.5;
}
{% endstyle %}
