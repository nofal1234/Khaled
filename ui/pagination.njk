  <!-- Pagination -->
  {% set current = (context.pagination and context.pagination.currentPage) or 1 %}
  {% set total = (context.pagination and context.pagination.totalPages) or 10 %}
  {% set pagination_background_color = settings.pagination_background_color | default('#f2f2f2') %}
  {% set pagination_text_color = settings.pagination_text_color  %}
  <div class="flex items-center justify-center mt-6">
    <nav class="flex items-center gap-3">
      {# Prev #}
      {% if current > 1 %}
      <a href="?page={{ current - 1 }}" class="h-8 w-8 md:h-9 md:w-9 flex items-center justify-center rounded-full border border-gray-300 hover:bg-gray-50"
        style="background-color: {{ pagination_background_color }}; color: {{ pagination_background_color }};">
        <span style="color: {{ transparent }};">‹</span>
      </a>
      {% else %}
      <span class="h-8 w-8 md:h-9 md:w-9 flex items-center justify-center rounded-full border border-gray-200 cursor-not-allowed"
        style="background-color: {{ transparent }}; color: {{ pagination_background_color }};">‹</span>
      {% endif %}

      {# Page 1..3 #}
      {% for p in [1,2,3] %}
        {% if p <= total %}
          {% if p == current %}
          <span class="h-8 w-8 md:h-9 md:w-9 flex items-center justify-center rounded-full"
            style="background-color: {{ pagination_background_color }}; color: {{ pagination_text_color }};">{{ p }}</span>
          {% else %}
          <a href="?page={{ p }}" class="h-8 w-8 md:h-9 md:w-9 flex items-center justify-center rounded-full border border-gray-300 hover:bg-gray-50"
            style="background-color: {{ pagination_background_color }}; color: {{ pagination_text_color }};">{{ p }}</a>
          {% endif %}
        {% endif %}
      {% endfor %}

      {# Ellipsis and last page #}
      {% if total > 4 %}
        <span class="h-8 w-8 md:h-9 md:w-9 flex items-center justify-center rounded-full border border-gray-200"
          style="background-color: {{ pagination_background_color }}; color: {{ pagination_text_color }};">…</span>
        <a href="?page={{ total }}" class="h-8 w-8 md:h-9 md:w-9 flex items-center justify-center rounded-full border border-gray-300 hover:bg-gray-50"
          style="background-color: {{ pagination_background_color }}; color: {{ pagination_text_color }};">{{ total }}</a>
      {% elseif total == 4 %}
        {% if 4 == current %}
        <span class="h-8 w-8 md:h-9 md:w-9 flex items-center justify-center rounded-full"
          style="background-color: {{ pagination_background_color }}; color: {{ pagination_text_color }};">4</span>
        {% else %}
        <a href="?page=4" class="h-8 w-8 md:h-9 md:w-9 flex items-center justify-center rounded-full border border-gray-300 hover:bg-gray-50"
          style="background-color: {{ pagination_background_color }}; color: {{ pagination_text_color }};">4</a>
        {% endif %}
      {% endif %}

      {# Next #}
      {% if current < total %}
      <a href="?page={{ current + 1 }}" class="h-8 w-8 md:h-9 md:w-9 flex items-center justify-center rounded-full border border-gray-300 hover:bg-gray-50"
        style="background-color: {{ transparent }}; color: {{ pagination_background_color }};">
        <span style="color: {{ pagination_background_color }};">›</span>
      </a>
      {% else %}
      <span class="h-8 w-8 md:h-9 md:w-9 flex items-center justify-center rounded-full border border-gray-200 cursor-not-allowed"
        style="background-color: {{ transparent }}; color: {{ pagination_background_color }};">›</span>
      {% endif %}
    </nav>
  </div>
