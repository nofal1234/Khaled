<!-- ############### START: PROFESSIONAL CART MODAL ############### -->
<style>
  [x-cloak] {
    display: none !important;
  }
  @media (max-width: 360px) {
    .cart-drawer .header { padding: 10px 12px !important; }
    .cart-drawer .content { padding: 10px 12px !important; }
    .cart-drawer .product-row { gap: 8px !important; }
    .cart-drawer .product-image { width: 64px !important; height: 80px !important; }
    .cart-drawer .title { font-size: 0.9rem !important; }
    .cart-drawer .subtitle { font-size: 0.8rem !important; }
    .cart-drawer .price { font-size: 0.9rem !important; }
    .cart-drawer .qty-input { width: 36px !important; }
    .cart-drawer .footer { padding: 12px !important; }
    .cart-drawer .cta { padding: 10px 12px !important; font-size: 0.95rem !important; }
  }
  /* Hide native number input spinners for the qty input */
  .qty-input::-webkit-outer-spin-button,
  .qty-input::-webkit-inner-spin-button {
    -webkit-appearance: none;
    margin: 0;
  }
  .qty-input[type=number] {
    -moz-appearance: textfield;
  }
  </style>

<div
  x-cloak
  x-data="Object.assign(xDataCart(), { open: false, allowOpen: false })"
  x-init="(() => {
    const enable = () => {
      allowOpen = true;
      window.removeEventListener('pointerdown', enable);
      window.removeEventListener('keydown', enable);
    };
    window.addEventListener('pointerdown', enable, { once: true });
    window.addEventListener('keydown', enable, { once: true });
  })()"
  x-effect="document.body.style.overflow = open ? 'hidden' : ''"
  :class="open ? 'fixed inset-0 z-50' : 'hidden'"
  @open-cart.window="if (allowOpen) open = true"
>
  <!-- Overlay -->
  <div
    @click="open = false"
    class="absolute inset-0 bg-black bg-opacity-50 backdrop-blur-sm"
  ></div>

  <!-- Modal -->
  <div class="absolute inset-0 p-0 pointer-events-none">
    <div
      class="cart-drawer absolute top-0 left-0 bg-white shadow-2xl rounded-none md:rounded-r-2xl overflow-hidden pointer-events-auto w-full h-screen md:w-[430px] transform-gpu transition-transform duration-300 ease-in-out"
      :class="[open ? 'translate-x-0' : '-translate-x-full']"
      x-transition:enter="transform transition duration-300 ease-out"
      x-transition:enter-start="-translate-x-full"
      x-transition:enter-end="translate-x-0"
      x-transition:leave="transform transition duration-200 ease-in"
      x-transition:leave-start="translate-x-0"
      x-transition:leave-end="-translate-x-full"
    >
      <div class="flex flex-col h-full">
        <!-- Header -->
        <div class="header flex justify-between items-center px-6 py-5 border-b border-gray-200 bg-white cart-title" :class="(globals?.cart?.items?.length > 0) ? 'flex-row' : 'flex-row-reverse'">
          <h2 class="text-lg font-semibold text-gray-800" x-show="globals?.cart?.items?.length > 0">{{ t('cart_title') }}</h2>
          <button
            @click="open = false"
            class="text-gray-500 hover:text-gray-700 transition"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 24 24"
              stroke-width="2"
              stroke="currentColor"
              class="w-6 h-6"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                d="M6 18L18 6M6 6l12 12"
              />
            </svg>
          </button>
        </div>

        <!-- Cart Items -->
        <div class="content flex-1 overflow-y-auto overflow-x-hidden px-5 md:px-6 py-5 space-y-6 cart-container">
          <!-- Headers -->
          <div class="grid grid-cols-2 md:grid-cols-12 border-b border-gray-200 pb-3 text-sm font-medium text-gray-700 cart-header" x-show="globals?.cart?.items?.length > 0">
            <div class="md:col-span-6 cart-item-col">{{ t('cart_product') }}</div>
            <div class="md:col-span-3 cart-item-col cart-item-price">{{ t('cart_price') }}</div>
            <div class="hidden md:block md:col-span-3 cart-item-col cart-item-quantity text-center">{{ t('cart_quantity') }}</div>
          </div>

          <!-- Dynamic Products from globals.cart.items -->
          <div class="space-y-6" x-show="globals?.cart?.items?.length > 0">
            <template x-for="item in globals?.cart?.items || []" :key="item._id">
              <div class="product-row flex flex-col md:grid md:grid-cols-12 md:items-center gap-4 md:gap-6 border-b border-gray-100 pb-4">
              <!-- Mobile: Row with image+name on left, price on right -->
              <div class="flex md:hidden justify-between items-start gap-3">
                <div class="flex items-start gap-3 flex-1">
                  <img :src="item?.productData?.image?.fileUrl" :alt="item?.productData?.title" class="product-image w-20 h-24 rounded-lg object-cover flex-shrink-0 border border-gray-200" />
                  <div class="flex-grow cart-item-col">
                    <p class="title font-semibold text-gray-800 text-sm" x-text="item?.productData?.title"></p>
                    <p class="subtitle text-xs text-gray-500 mt-1" x-text="(item?.variantData?.options||[]).map(o=>o?.label).join(' / ')"></p>
                    <!-- Quantity control on mobile -->
                    <div class="flex items-center border border-gray-300 mt-3" style="width: 76px; height: 27px; border-radius: 12.77px; border-width: 0.39px; padding: 3.1px 6.19px; gap: 13px;">
                      <input type="number" class="qty-input text-center border-0 p-0 focus:ring-0 font-semibold text-gray-800" style="width: 20px;" :value="item.quantity" @input="updateQuantityFromInput(item._id, $event)" />
                      <div class="flex flex-col items-center" style="gap: 2px;">
                        <button class="text-gray-600 hover:text-gray-800" aria-label="{{ t('cart_increase_quantity') }}" @click="increaseCartItem(item._id, item.quantity)">
                          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2.5" stroke="currentColor" class="w-3 h-3">
                            <path stroke-linecap="round" stroke-linejoin="round" d="m4.5 15.75 7.5-7.5 7.5 7.5" />
                          </svg>
                        </button>
                        <button class="text-gray-600 hover:text-gray-800" aria-label="{{ t('cart_decrease_quantity') }}" @click="decreaseCartItem(item._id, item.quantity)">
                          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2.5" stroke="currentColor" class="w-3 h-3">
                            <path stroke-linecap="round" stroke-linejoin="round" d="m19.5 8.25-7.5 7.5-7.5-7.5" />
                          </svg>
                        </button>
                      </div>
                    </div>
                    <!-- Remove button on mobile -->
                    <button aria-label="{{ t('cart_remove_product') }}" class="text-sm text-gray-500 hover:text-red-600 flex items-center gap-1.5 mt-2" @click="clearCartItem(item._id)">
                      {{ t('cart_remove') }}
                      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.8" stroke="currentColor" class="w-5 h-5">
                        <path stroke-linecap="round" stroke-linejoin="round" d="m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12.54 0c-.342.052-.682.107-1.022.166m11.518 0c-3.478-.397-7.04-.397-10.518 0m10.518 0a48.1 48.1 0 0 1 3.478.397" />
                      </svg>
                    </button>
                  </div>
                </div>
                <div class="font-semibold text-gray-800 text-sm price cart-item-price"><span x-text="item.totalPrice"></span> <span>{{ currency.currencySymbol }}</span></div>
              </div>
              <!-- Desktop: Grid layout -->
              <div class="hidden md:flex col-span-6 items-center md:pr-6 flex-row cart-item-col">
                <button aria-label="{{ t('cart_remove_product') }}" class="mr-0 ml-3 text-gray-400 hover:text-red-500" @click="clearCartItem(item._id)">
                  <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.8" stroke="currentColor" class="w-5 h-5">
                    <path stroke-linecap="round" stroke-linejoin="round" d="m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12.54 0c-.342.052-.682.107-1.022.166m11.518 0c-3.478-.397-7.04-.397-10.518 0m10.518 0a48.1 48.1 0 0 1 3.478.397" />
                  </svg>
                </button>
                <img :src="item?.productData?.image?.fileUrl" :alt="item?.productData?.title" class="product-image w-20 h-24 rounded-lg object-cover ml-4 flex-shrink-0 border border-gray-200" />
                <div class="flex-grow cart-item-col">
                  <p class="title font-semibold text-gray-800 text-sm" x-text="item?.productData?.title"></p>
                  <p class="subtitle text-xs text-gray-500 mt-1" x-text="(item?.variantData?.options||[]).map(o=>o?.label).join(' / ')"></p>
                </div>
              </div>
              <div class="hidden md:block col-span-3 text-center font-semibold text-gray-800 text-sm price cart-item-price"><span x-text="item.totalPrice"></span> <span>{{ currency.currencySymbol }}</span></div>
              <div class="hidden md:flex col-span-3 justify-center items-center cart-item-quantity">
                <div class="flex items-center border border-gray-300 mt-3" style="width: 76px; height: 27px; border-radius: 12.77px; border-width: 0.39px; padding: 3.1px 6.19px; gap: 13px;">
                  <input type="number" class="qty-input text-center border-0 p-0 focus:ring-0 font-semibold text-gray-800" style="width: 20px;" :value="item.quantity" @input="updateQuantityFromInput(item._id, $event)" />
                  <div class="flex flex-col items-center" style="gap: 2px;">
                    <button class="text-gray-600 hover:text-gray-800" aria-label="{{ t('cart_increase_quantity') }}" @click="increaseCartItem(item._id, item.quantity)">
                      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2.5" stroke="currentColor" class="w-3 h-3">
                        <path stroke-linecap="round" stroke-linejoin="round" d="m4.5 15.75 7.5-7.5 7.5 7.5" />
                      </svg>
                    </button>
                    <button class="text-gray-600 hover:text-gray-800" aria-label="{{ t('cart_decrease_quantity') }}" @click="decreaseCartItem(item._id, item.quantity)">
                      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2.5" stroke="currentColor" class="w-3 h-3">
                        <path stroke-linecap="round" stroke-linejoin="round" d="m19.5 8.25-7.5 7.5-7.5-7.5" />
                      </svg>
                    </button>
                  </div>
                </div>
              </div>
            </template>
          </div>

          <!-- Empty Cart Message -->
          <div x-show="!(globals?.cart?.items?.length > 0)" class="flex flex-col items-center justify-center flex-1 min-h-[50vh] px-4">
            <iconify-icon icon="proicons:cart" width="80" height="80" style="transform: scaleX(-1);" class="text-gray-400 mb-6"></iconify-icon>
            <p class="text-lg md:text-xl font-semibold text-gray-700">{{ t('cart_empty') }}</p>
          </div>

          <!-- ############### START: DEFAULT PRODUCTS ############### -->
          <div class="space-y-6" x-show="false">
            <!-- Product 1 -->
            <div class="product-row flex flex-col md:grid md:grid-cols-12 md:items-center gap-4 md:gap-6 border-b border-gray-100 pb-4">
              <!-- Mobile: Row with image+name on left, price on right -->
              <div class="flex md:hidden justify-between items-start gap-3">
                <div class="flex items-start gap-3 flex-1">
                  <img
                    src="https://images.unsplash.com/photo-1606813902746-007d5c64e7e2?auto=format&fit=crop&w=300&q=80"
                    alt="منتج 1"
                    class="product-image w-20 h-24 rounded-lg object-cover flex-shrink-0 border border-gray-200"
                  />
                  <div class="flex-grow cart-item-col">
                    <p class="title font-semibold text-gray-800 text-sm">سماعات بلوتوث</p>
                    <p class="subtitle text-xs text-gray-500 mt-1">موديل X10</p>
                    <!-- Quantity control on mobile -->
                    <div class="flex items-center border border-gray-300 mt-3" style="width: 76px; height: 27px; border-radius: 12.77px; border-width: 0.39px; padding: 3.1px 6.19px; gap: 13px;">
                      <input type="number" value="1" class="qty-input text-center border-0 p-0 focus:ring-0 font-semibold text-gray-800" style="width: 20px;" />
                      <div class="flex flex-col items-center" style="gap: 2px;">
                        <button class="text-gray-600 hover:text-gray-800" aria-label="{{ t('cart_increase_quantity') }}">
                          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2.5" stroke="currentColor" class="w-3 h-3">
                            <path stroke-linecap="round" stroke-linejoin="round" d="m4.5 15.75 7.5-7.5 7.5 7.5" />
                          </svg>
                        </button>
                        <button class="text-gray-600 hover:text-gray-800" aria-label="{{ t('cart_decrease_quantity') }}">
                          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2.5" stroke="currentColor" class="w-3 h-3">
                            <path stroke-linecap="round" stroke-linejoin="round" d="m19.5 8.25-7.5 7.5-7.5-7.5" />
                          </svg>
                        </button>
                      </div>
                    </div>
                    <!-- Remove button on mobile -->
                    <button aria-label="{{ t('cart_remove_product') }}" class="text-sm text-gray-500 hover:text-red-600 flex items-center gap-1.5 mt-2">
                      {{ t('cart_remove') }}
                      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.8" stroke="currentColor" class="w-5 h-5">
                        <path stroke-linecap="round" stroke-linejoin="round" d="m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12.54 0c-.342.052-.682.107-1.022.166m11.518 0c-3.478-.397-7.04-.397-10.518 0m10.518 0a48.1 48.1 0 0 1 3.478.397" />
                      </svg>
                    </button>
                  </div>
                </div>
                <div class="font-semibold text-gray-800 text-sm price cart-item-price">450 جنيه</div>
              </div>
              <!-- Desktop: Grid layout -->
              <div class="hidden md:flex col-span-6 items-center md:pr-6 flex-row cart-item-col">
                <button aria-label="{{ t('cart_remove_product') }}" class="mr-0 ml-3 text-gray-400 hover:text-red-500">
                  <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.8" stroke="currentColor" class="w-5 h-5">
                    <path stroke-linecap="round" stroke-linejoin="round" d="m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12.54 0c-.342.052-.682.107-1.022.166m11.518 0c-3.478-.397-7.04-.397-10.518 0m10.518 0a48.1 48.1 0 0 1 3.478.397" />
                  </svg>
                </button>
                <img
                  src="https://images.unsplash.com/photo-1606813902746-007d5c64e7e2?auto=format&fit=crop&w=300&q=80"
                  alt="منتج 1"
                  class="product-image w-20 h-24 rounded-lg object-cover ml-4 flex-shrink-0 border border-gray-200"
                />
                <div class="flex-grow cart-item-col">
                  <p class="title font-semibold text-gray-800 text-sm">سماعات بلوتوث</p>
                  <p class="subtitle text-xs text-gray-500 mt-1">موديل X10</p>
                </div>
              </div>
              <div class="hidden md:block col-span-3 text-center font-semibold text-gray-800 text-sm price cart-item-price">450 جنيه</div>
              <div class="hidden md:flex col-span-3 justify-center items-center cart-item-quantity">
                <div class="flex items-center border border-gray-300 rounded-full py-0.5 px-3">
                  <input type="number" value="1" class="qty-input w-10 text-center border-0 p-0 focus:ring-0 font-semibold text-gray-800" />
                  <div class="flex flex-col items-center ml-2">
                    <button class="text-gray-600 hover:text-gray-800" aria-label="{{ t('cart_increase_quantity') }}">
                      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2.5" stroke="currentColor" class="w-3 h-3">
                        <path stroke-linecap="round" stroke-linejoin="round" d="m4.5 15.75 7.5-7.5 7.5 7.5" />
                      </svg>
                    </button>
                    <button class="text-gray-600 hover:text-gray-800 mt-1" aria-label="{{ t('cart_decrease_quantity') }}">
                      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2.5" stroke="currentColor" class="w-3 h-3">
                        <path stroke-linecap="round" stroke-linejoin="round" d="m19.5 8.25-7.5 7.5-7.5-7.5" />
                      </svg>
                    </button>
                  </div>
                </div>
              </div>
            </div>

            <!-- Product 2 -->
            <div class="product-row flex flex-col md:grid md:grid-cols-12 md:items-center gap-4 border-b border-gray-100 pb-4">
              <!-- Mobile: Row with image+name on left, price on right -->
              <div class="flex md:hidden justify-between items-start gap-3">
                <div class="flex items-start gap-3 flex-1">
                  <img
                    src="https://images.unsplash.com/photo-1592503250972-5c1db4b6b5ec?auto=format&fit=crop&w=300&q=80"
                    alt="منتج 2"
                    class="product-image w-20 h-24 rounded-lg object-cover flex-shrink-0 border border-gray-200"
                  />
                  <div class="flex-grow cart-item-col">
                    <p class="title font-semibold text-gray-800 text-sm">ساعة ذكية</p>
                    <p class="subtitle text-xs text-gray-500 mt-1">Smart Pro 7</p>
                    <!-- Quantity control on mobile -->
                    <div class="flex items-center border border-gray-300 mt-3" style="width: 76px; height: 27px; border-radius: 12.77px; border-width: 0.39px; padding: 3.1px 6.19px; gap: 13px;">
                      <input type="number" value="1" class="qty-input text-center border-0 p-0 focus:ring-0 font-semibold text-gray-800" style="width: 20px;" />
                      <div class="flex flex-col items-center" style="gap: 2px;">
                        <button class="text-gray-600 hover:text-gray-800" aria-label="{{ t('cart_increase_quantity') }}">
                          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2.5" stroke="currentColor" class="w-3 h-3">
                            <path stroke-linecap="round" stroke-linejoin="round" d="m4.5 15.75 7.5-7.5 7.5 7.5" />
                          </svg>
                        </button>
                        <button class="text-gray-600 hover:text-gray-800" aria-label="{{ t('cart_decrease_quantity') }}">
                          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2.5" stroke="currentColor" class="w-3 h-3">
                            <path stroke-linecap="round" stroke-linejoin="round" d="m19.5 8.25-7.5 7.5-7.5-7.5" />
                          </svg>
                        </button>
                      </div>
                    </div>
                    <!-- Remove button on mobile -->
                    <button aria-label="{{ t('cart_remove_product') }}" class="text-sm text-gray-500 hover:text-red-600 flex items-center gap-1.5 mt-2">
                      {{ t('cart_remove') }}
                      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.8" stroke="currentColor" class="w-5 h-5">
                        <path stroke-linecap="round" stroke-linejoin="round" d="m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12.54 0c-.342.052-.682.107-1.022.166m11.518 0c-3.478-.397-7.04-.397-10.518 0m10.518 0a48.1 48.1 0 0 1 3.478.397" />
                      </svg>
                    </button>
                  </div>
                </div>
                <div class="font-semibold text-gray-800 text-sm price cart-item-price">950 جنيه</div>
              </div>
              <!-- Desktop: Grid layout -->
              <div class="hidden md:flex col-span-6 items-center md:pr-6 flex-row cart-item-col">
                <button aria-label="{{ t('cart_remove_product') }}" class="mr-0 ml-3 text-gray-400 hover:text-red-500">
                  <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.8" stroke="currentColor" class="w-5 h-5">
                    <path stroke-linecap="round" stroke-linejoin="round" d="m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12.54 0c-.342.052-.682.107-1.022.166m11.518 0c-3.478-.397-7.04-.397-10.518 0m10.518 0a48.1 48.1 0 0 1 3.478.397" />
                  </svg>
                </button>
                <img
                  src="https://images.unsplash.com/photo-1592503250972-5c1db4b6b5ec?auto=format&fit=crop&w=300&q=80"
                  alt="منتج 2"
                  class="product-image w-20 h-24 rounded-lg object-cover ml-4 flex-shrink-0 border border-gray-200"
                />
                <div class="flex-grow cart-item-col">
                  <p class="title font-semibold text-gray-800 text-sm">ساعة ذكية</p>
                  <p class="subtitle text-xs text-gray-500 mt-1">Smart Pro 7</p>
                </div>
              </div>
              <div class="hidden md:block col-span-3 text-center font-semibold text-gray-800 text-sm price cart-item-price">950 جنيه</div>
              <div class="hidden md:flex col-span-3 justify-center items-center cart-item-quantity">
                <div class="flex items-center border border-gray-300 rounded-full py-0.5 px-3">
                  <input type="number" value="1" class="qty-input w-10 text-center border-0 p-0 focus:ring-0 font-semibold text-gray-800" />
                  <div class="flex flex-col items-center ml-2">
                    <button class="text-gray-600 hover:text-gray-800" aria-label="{{ t('cart_increase_quantity') }}">
                      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2.5" stroke="currentColor" class="w-3 h-3">
                        <path stroke-linecap="round" stroke-linejoin="round" d="m4.5 15.75 7.5-7.5 7.5 7.5" />
                      </svg>
                    </button>
                    <button class="text-gray-600 hover:text-gray-800 mt-1" aria-label="{{ t('cart_decrease_quantity') }}">
                      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2.5" stroke="currentColor" class="w-3 h-3">
                        <path stroke-linecap="round" stroke-linejoin="round" d="m19.5 8.25-7.5 7.5-7.5-7.5" />
                      </svg>
                    </button>
                  </div>
                </div>
              </div>
            </div>

            <!-- Product 3 -->
            <div class="product-row flex flex-col md:grid md:grid-cols-12 md:items-center gap-4 md:gap-6 border-b border-gray-100 pb-4">
              <!-- Mobile: Row with image+name on left, price on right -->
              <div class="flex md:hidden justify-between items-start gap-3">
                <div class="flex items-start gap-3 flex-1">
                  <img
                    src="https://images.unsplash.com/photo-1596461404969-9ae70f2830c1?auto=format&fit=crop&w=300&q=80"
                    alt="منتج 3"
                    class="product-image w-20 h-24 rounded-lg object-cover flex-shrink-0 border border-gray-200"
                  />
                  <div class="flex-grow cart-item-col">
                    <p class="title font-semibold text-gray-800 text-sm">كيبورد ميكانيكي</p>
                    <p class="subtitle text-xs text-gray-500 mt-1">RGB Edition</p>
                    <!-- Quantity control on mobile -->
                    <div class="flex items-center border border-gray-300 mt-3" style="width: 76px; height: 27px; border-radius: 12.77px; border-width: 0.39px; padding: 3.1px 6.19px; gap: 13px;">
                      <input type="number" value="1" class="qty-input text-center border-0 p-0 focus:ring-0 font-semibold text-gray-800" style="width: 20px;" />
                      <div class="flex flex-col items-center" style="gap: 2px;">
                        <button class="text-gray-600 hover:text-gray-800" aria-label="{{ t('cart_increase_quantity') }}">
                          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2.5" stroke="currentColor" class="w-3 h-3">
                            <path stroke-linecap="round" stroke-linejoin="round" d="m4.5 15.75 7.5-7.5 7.5 7.5" />
                          </svg>
                        </button>
                        <button class="text-gray-600 hover:text-gray-800" aria-label="{{ t('cart_decrease_quantity') }}">
                          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2.5" stroke="currentColor" class="w-3 h-3">
                            <path stroke-linecap="round" stroke-linejoin="round" d="m19.5 8.25-7.5 7.5-7.5-7.5" />
                          </svg>
                        </button>
                      </div>
                    </div>
                    <!-- Remove button on mobile -->
                    <button aria-label="{{ t('cart_remove_product') }}" class="text-sm text-gray-500 hover:text-red-600 flex items-center gap-1.5 mt-2">
                      {{ cart_remove }}
                      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.8" stroke="currentColor" class="w-5 h-5">
                        <path stroke-linecap="round" stroke-linejoin="round" d="m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12.54 0c-.342.052-.682.107-1.022.166m11.518 0c-3.478-.397-7.04-.397-10.518 0m10.518 0a48.1 48.1 0 0 1 3.478.397" />
                      </svg>
                    </button>
                  </div>
                </div>
                <div class="font-semibold text-gray-800 text-sm price cart-item-price">720 جنيه</div>
              </div>
              <!-- Desktop: Grid layout -->
              <div class="hidden md:flex col-span-6 items-center md:pr-6 flex-row cart-item-col">
                <button aria-label="{{ t('cart_remove_product') }}" class="mr-0 ml-3 text-gray-400 hover:text-red-500">
                  <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.8" stroke="currentColor" class="w-5 h-5">
                    <path stroke-linecap="round" stroke-linejoin="round" d="m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12.54 0c-.342.052-.682.107-1.022.166m11.518 0c-3.478-.397-7.04-.397-10.518 0m10.518 0a48.1 48.1 0 0 1 3.478.397" />
                  </svg>
                </button>
                <img
                  src="https://images.unsplash.com/photo-1596461404969-9ae70f2830c1?auto=format&fit=crop&w=300&q=80"
                  alt="منتج 3"
                  class="product-image w-20 h-24 rounded-lg object-cover ml-4 flex-shrink-0 border border-gray-200"
                />
                <div class="flex-grow cart-item-col">
                  <p class="title font-semibold text-gray-800 text-sm">كيبورد ميكانيكي</p>
                  <p class="subtitle text-xs text-gray-500 mt-1">RGB Edition</p>
                </div>
              </div>
              <div class="hidden md:block col-span-3 text-center font-semibold text-gray-800 text-sm price cart-item-price">720 جنيه</div>
              <div class="hidden md:flex col-span-3 justify-center items-center cart-item-quantity">
                <div class="flex items-center border border-gray-300 rounded-full py-0.5 px-3">
                  <input type="number" value="1" class="qty-input w-10 text-center border-0 p-0 focus:ring-0 font-semibold text-gray-800" />
                  <div class="flex flex-col items-center ml-2">
                    <button class="text-gray-600 hover:text-gray-800" aria-label="{{ t('cart_increase_quantity') }}">
                      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2.5" stroke="currentColor" class="w-3 h-3">
                        <path stroke-linecap="round" stroke-linejoin="round" d="m4.5 15.75 7.5-7.5 7.5 7.5" />
                      </svg>
                    </button>
                    <button class="text-gray-600 hover:text-gray-800 mt-1" aria-label="{{ t('cart_decrease_quantity') }}">
                      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2.5" stroke="currentColor" class="w-3 h-3">
                        <path stroke-linecap="round" stroke-linejoin="round" d="m19.5 8.25-7.5 7.5-7.5-7.5" />
                      </svg>
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <!-- ############### END: DEFAULT PRODUCTS ############### -->
        </div>

        <!-- Footer -->
        <footer class="footer p-6 border-t border-gray-200 bg-white shadow-inner space-y-5" x-show="globals?.cart?.items?.length > 0">
          <div class="flex justify-between items-center cart-summary-row">
            <span class="text-lg font-semibold text-gray-800">{{ t('cart_total') }}</span>
            <span class="text-lg font-bold text-gray-800"><span x-text="globals?.cart?.totalPrice || 0"></span> <span>{{ currency.currencySymbol }}</span></span>
          </div>

          <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
            <button
              class="cta w-full bg-black text-white py-3 rounded-full font-semibold text-base hover:bg-gray-800 transition disabled:opacity-50 disabled:cursor-not-allowed"
              aria-label="{{ t('cart_checkout_now') }}"
              :disabled="globalLoading.checkout"
              @click="checkout()"
            >
              {{ t('cart_checkout_now') }}
            </button>
            <a
              href="/cart"
              class="cta w-full bg-white border-2 border-black text-black py-3 rounded-full font-semibold text-base hover:bg-gray-100 text-center transition"
            >
              {{ t('cart_open_cart') }}
            </a>
          </div>
        </footer>
      </div>
    </div>
  </div>
</div>
<!-- ############### END: PROFESSIONAL CART MODAL ############### -->